{"meta":{"title":"ğŸ§ Peach","subtitle":"equne","description":"èœœæ¡ƒæƒ³å†™å¯çˆ±çš„ä»£ç ","author":"equne","url":"https://equnee.github.io","root":"/"},"pages":[],"posts":[{"title":"ğŸ¦‹ HashMap","slug":"note/Data-Structure/data-structure_HashMap","date":"2023-03-09T15:11:32.969Z","updated":"2023-03-11T14:55:26.474Z","comments":true,"path":"note/Data-Structure/data-structure_HashMap/","link":"","permalink":"https://equnee.github.io/note/Data-Structure/data-structure_HashMap/","excerpt":"","text":"æ³¨ï¼šæœ¬æ–‡åˆ¶ä½œçš„æµç¨‹å›¾ä»…ä¸ºä¸ªäººç†è§£ï¼Œä»…ä¾›å‚è€ƒã€‚ ä¸€ã€Hashç®—æ³•1. HashMapåŸç†ï¼ˆ1ï¼‰HashMapæ€ä¹ˆå­˜å– ä½¿ç”¨æ•°ç»„ä¿å­˜ã€é€šè¿‡æ•°ç»„ç´¢å¼•è·å–ï¼š %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'edgeLabelBackground': '#ddebe6' } } }%% graph TD T((\"HashMapæ€ä¹ˆå­˜å–å€¼\")):::p T --> |\"æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨\"| A[\"key â€” value\"] A --> |\"åŒ…è£…ä¸ºNodeæ•°ç»„å¯¹è±¡\"| B[\"Node { key, value }\"] B --> |\"é€šè¿‡nodeæ•°ç»„ä¸‹æ ‡ä¿å­˜å¯¹åº”æ•°æ®\"| C[\"node[0] = new Node { key, value }node[1] = new Node { key, value }node[2] = new Node { key, value } ...\"] C -.-> |\"[ ä¿å­˜ ] éå†æ•°ç»„ï¼Œå¯¹åº”keyå’Œvalue\"| D[\"for (Node node : nodes)\"] C --> |\"[ è·å– ] é€šè¿‡ æ•°ç»„ç´¢å¼• è·å–ï¼ˆkeyçš„hashå€¼ï¼‰\"|E[\"node[ hash(key) ] = value\"]:::lb classDef p fill:#ddaebd style E fill:#d9dfeb, stroke:#657eae,stroke-width:2px,stroke-dasharray: 5 3 ï¼ˆ2ï¼‰Hashç®—æ³•æ€ä¹ˆå†™ è®¡ç®—æ•°ç»„ç´¢å¼•å€¼ï¼š %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'clusterBorder': 'none', 'clusterBkg': '#f0f2f7' } } }%% graph TD T((\"Hashç®—æ³•æ€ä¹ˆå†™ï¼Ÿ\")):::p T --> |\"å¦‚ä½•è®¡ç®—å‡ºæ•°ç»„ç´¢å¼•ï¼Ÿhash(key)\"| A[\"* å› ä¸ºNodeæ•°ç»„æœ‰å›ºå®šçš„åˆå§‹åŒ–é»˜è®¤é•¿åº¦ï¼ˆlengthï¼‰* ç´¢å¼•å€¼éœ€é™å®šåœ¨æ•°ç»„é•¿åº¦èŒƒå›´å†…ï¼ˆ0ï½length-1ï¼‰* ç´¢å¼•å€¼è¿˜è¦å°½å¯èƒ½å¹³è¡¡ã€åˆ†å¸ƒå‡åŒ€\"] A --> B([\"å–æ¨¡è¿ç®—ï¼šhash % length\"]) B ==> |\"ï¼ˆæ›´å¥½çš„æ–¹æ¡ˆï¼šä½¿ç”¨ä½è¿ç®—æ•ˆç‡æ›´é«˜ï¼‰\"| C([\"ä½è¿ç®—ï¼šhash & (length - 1)\"]) C -.- c(\"lengthå¿…é¡»æ˜¯2çš„næ¬¡å¹‚\"):::b subgraph \"å‰ç½®æ¡ä»¶\" c -.- c2[\"å‡å¦‚ key = 20, length = 16, hash & (length-1):0001 0100 // 20 0000 1111 // 150000 0100 // =4\"]:::c2 end classDef p fill:#ddaebd classDef b fill:#d2d9e7, stroke-width: 0px style c2 color: #86868b, fill:#ebedf3, stroke-dasharray: 3 3 %% å–æ¨¡è¿ç®— style B fill: #f4e4e9 %% \"ä½è¿ç®—\" style C fill:#b8c3d9, stroke:#657eae,stroke-width:2px ä¸ºäº†è§£å†³å–æ¨¡çš„æ•ˆç‡é—®é¢˜ï¼Œé‡‡ç”¨äº†ä½è¿ç®—çš„æ–¹æ³•ï¼šindex = hashå€¼ &amp; (length -1)æ­¤æ—¶éœ€è¦ä¸€ä¸ªå‰ç½®æ¡ä»¶ï¼šlengthçš„é•¿åº¦å¿…é¡»æ˜¯2çš„næ¬¡å¹‚ã€‚å½“lengthçš„é•¿åº¦æ˜¯2næ—¶ï¼Œæœ‰ä»¥ä¸‹å…¬å¼æˆç«‹ï¼š num%2n = num&amp;(2n-1) ã€‚ ğŸ¦‹ å› ä¸ºå°±åƒåè¿›åˆ¶å–ä½™ä¸€æ ·ï¼Œè‹¥é™¤ä»¥10æˆ–10çš„æ•´æ¬¡å¹‚æ•°ï¼Œä½™æ•°åˆšå¥½æ˜¯å–ä½ä½ä¸Šçš„æ•°å­—ã€‚åŒç†ï¼ŒäºŒè¿›åˆ¶å–ä½™æ•°åªè¦é™¤ä»¥2çš„næ¬¡å¹‚æ•°ï¼Œä½ä½ä¸Šçš„æ•°å­—å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ä½™æ•°ã€‚è€Œ(2n - 1)çš„äºŒè¿›åˆ¶æœ‰æ•ˆä½éƒ½æ˜¯1ï¼Œå’Œnä½çš„1ä½œä¸è¿ç®—ç›¸å½“äºå–ä½nä½çš„å€¼ã€‚ lengthçš„é•¿åº¦åˆšå¥½æ˜¯2çš„næ¬¡å¹‚ï¼Œæ‰©å®¹ä¹Ÿæ˜¯æŒ‰åŸæ¥çš„2å€å®¹é‡è¿›è¡Œæ‰©å®¹ï¼Œå¯ä»¥åŠ å¿«hashè®¡ç®—ã€å‡å°‘hashå†²çªã€‚ ğŸ¦‹ åŠ å¿«hashè®¡ç®—ï¼š ä¸¤å€æ‰©å®¹æœºåˆ¶ä½¿å®¹é‡ä¸€ç›´ä¿æŒåœ¨2çš„næ¬¡å¹‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨ä½è¿ç®—ä»£æ›¿å–æ¨¡è¿ç®—ï¼Œæå‡hashè®¡ç®—æ•ˆç‡ã€‚ å½“å®¹é‡ä¿æŒä¸º2çš„næ¬¡å¹‚æ—¶ï¼Œæ¯æ¬¡æ‰©å®¹æ—¶ä½è¿ç®—è®¡ç®—å¾—å‡ºçš„ä½™æ•°ä¸å˜ï¼Œæ•°æ®å­˜æ”¾çš„ç´¢å¼•ä½ç½®ä¹Ÿä¿æŒä¸å˜ã€‚è€Œä½¿ç”¨%è®¡ç®—æ—¶ï¼Œç»“æœä¼šå› ä¸ºå®¹é‡çš„å˜åŒ–è€Œæ”¹å˜ï¼ˆæ¨¡è¿ç®—ä¼šäº§ç”Ÿå°æ•°ç‚¹ï¼‰ï¼Œæ¯æ¬¡æ‰©å®¹æ—¶æ•°æ®åœ¨æ•°ç»„ä¸­å­˜æ”¾çš„ä½ç½®ä¼šå‘ç”Ÿæ”¹å˜ï¼ˆæ•°æ®æ¼‚ç§»ï¼‰ï¼Œå½±å“æ€§èƒ½ã€‚ ğŸ¦‹ å‡å°‘hashå†²çªï¼š å°†å®¹é‡ä¿æŒä¸ºå¶æ•°è¿›è¡Œhashè®¡ç®—æ—¶ï¼Œç»è¿‡(length-1)åï¼Œè®¡ç®—å‡ºçš„ç´¢å¼•å€¼ä¸ºå¥‡æ•°å’Œå¶æ•°çš„æ¦‚ç‡ç›¸åŒï¼ˆå–å†³äºéšæœºç”Ÿæˆçš„hashå€¼ï¼‰ï¼› è€Œä½¿ç”¨å¥‡æ•°å®¹é‡è¿›è¡Œhashè®¡ç®—æ—¶ï¼Œç»è¿‡(length-1)åï¼Œæœ€ç»ˆç»“æœå‡ä¸ºå¶æ•°ï¼Œè¿™æ ·ä»»ä½• hash å€¼éƒ½åªä¼šè¢«æ•£åˆ—åˆ°æ•°ç»„çš„å¶æ•°ä¸‹æ ‡ä½ç½®ä¸Šï¼Œè¿™æµªè´¹äº†è¿‘ä¸€åŠçš„ç©ºé—´ã€‚ å› æ­¤2çš„næ¬¡å¹‚å®¹é‡ã€åŒå€æ‰©å®¹æœºåˆ¶å¯ä»¥ä½¿å®¹é‡ä¿æŒåœ¨å¶æ•°å€¼ï¼Œå¯ä»¥ä½¿æ·»åŠ çš„å…ƒç´ åœ¨HashMapçš„æ•°ç»„ä¸­å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘hashç¢°æ’ã€‚ ï¼ˆ3ï¼‰Hashå†²çªæ€ä¹ˆåŠ Hashå†²çª %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'edgeLabelBackground': '#ddebe6' } } }%% graph TD T((\"1. Hashå†²çªæ€ä¹ˆä¼˜åŒ–\")):::p --> T1(\"hashè¡¨é‡Œå¯ä»¥å­˜å‚¨å…ƒç´ çš„ä½ç½®è¢«ç§°ä¸ºâ€œæ¡¶ï¼ˆbucketï¼‰â€\") T1 --> |\"é€šå¸¸æƒ…å†µ\"| A(\"å•ä¸ªâ€œæ¡¶â€é‡Œå­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æ€§èƒ½æœ€ä½³\"):::g A -.-> |\"O(1)\"| a[\"hashç®—æ³•å¯ä»¥æ ¹æ®hashCodeå€¼è®¡ç®—å‡ºâ€œæ¡¶â€çš„å­˜å‚¨ä½ç½®ï¼Œæ¥ç€ä»â€œæ¡¶â€ä¸­å–å‡ºå…ƒç´ ã€‚\"] T1 --> |\"å“ˆå¸Œå†²çªçš„æƒ…å†µ\"| B(\"å•ä¸ªæ¡¶ä¼šå­˜å‚¨å¤šä¸ªå…ƒç´ ï¼ˆhashå€¼ç›¸åŒï¼‰\"):::g B -.-> |\"O(n)\"|b([\"å¤šä¸ªå…ƒç´ ä»¥ é“¾è¡¨ å½¢å¼å­˜å‚¨\"]):::B b --> 2T((\"2. Hashå†²çªå¾ˆå¤§æ€ä¹ˆä¼˜åŒ–\")):::p subgraph \"ï¼ˆé“¾è¡¨å¿…é¡»æŒ‰é¡ºåºæœç´¢ï¼Œå­˜å–æ€§èƒ½å·®ï¼‰\" 2T --> C([\"å°†é“¾è¡¨ç»“æ„è½¬ä¸ºçº¢é»‘æ ‘\"]):::B C -.- |\"O(logn)\"|c[\"ä»¥æ ‘çš„é«˜åº¦ä¸ºæœ€å·®æŸ¥è¯¢æ€§èƒ½ï¼Œæ°¸è¿œä¸ä¼šå‡ºç°O(n)çš„æƒ…å†µã€‚\"]:::info end classDef p fill:#ddaebd classDef g fill:#f4e4e9 classDef B fill:#d9dfeb, stroke:#657eae,stroke-width:2px classDef info fill:#f6f6f7,color:#737379stroke-width: 2px, stroke-dasharray: 5 5 Hashå†²çªç¤ºæ„å›¾ %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'edgeLabelBackground': '#cde2da', 'clusterBorder': 'none', 'clusterBkg': '#ececee' } } }%% %% é“¾è¡¨è¶…è¿‡8æ—¶æ ‘åŒ–æˆçº¢é»‘æ ‘ graph TD subgraph \"Entry[]\" Entry0[\"Entry0Nodeï¼œK,V>\"] -.- Entry1 -.- Entry2 -.- Entry3 -.- Entry4 -.- Entry5 -.- Entry6 end subgraph é“¾è¡¨ Entry1 --> A[Entry] --> B[Entry] --> C[Entry] --> D[Entry] --> E[Entry] --> F[Entry] --> G[Entry] end subgraph çº¢é»‘æ ‘ Entry4 --> a[Entry] a[Entry] --> b[Entry] b --> b1[Entry] b --> b2[Entry] a --> c[Entry] c --> c1[Entry] c --> c2[Entry] b1 --> d[Entry] b1 --> d2[Entry] end style é“¾è¡¨ fill:#ddebe6 style çº¢é»‘æ ‘ fill:#f4e4e9 ï¼ˆ4ï¼‰Hashå†²çªæ—¶ Hashå†²çªæ—¶åˆ é™¤å…ƒç´ ï¼š %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'edgeLabelBackground': '#cde2da' } } }%% graph TD T((\"Hashå†²çªæ—¶æ€ä¹ˆåˆ é™¤å…ƒç´ ï¼Ÿ\")):::p T --> B[\"å…ˆæ ¹æ®keyæ‰¾åˆ°æ¡¶ä½\"] B --> A(\"åˆ¤æ–­ä¸ºçº¢é»‘æ ‘æˆ–é“¾è¡¨ï¼Œæ ¹æ®ä¸åŒç»“æ„ä»å½“å‰ä½ç½®ç§»é™¤\") A -.-> |\"é“¾è¡¨\"|a[\"å°†ä¸Šä¸ªä½ç½®æŒ‡ç©º\"]:::b A -.-> |\"çº¢é»‘æ ‘\"|b[\"å»æ‰å½“å‰èŠ‚ç‚¹åè‡ªå¹³è¡¡\"]:::b classDef p fill:#ddaebd classDef b fill:#d9dfeb äºŒã€HashMapæºç 1. æ„é€ æ–¹æ³•%%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'edgeLabelBackground': '#ddebe6' } } }%% graph LR T((\"HashMapæ„é€ æ–¹æ³•\")):::p T --> A([\"HashMap map1 = new HashMap();\"]):::lp T --> B([\"HashMap map2 = new HashMap(30);\"]):::lp T --> C([\"HashMap map3 = new HashMap(30, 0.5f);\"]):::lp T --> D([\"HashMap map4 = new HashMap(map);\"]):::lp A --- |\"æ— å‚æ„é€ æ–¹æ³•\"|a(\"ä¸æŒ‡å®šå®¹é‡ï¼Œé»˜è®¤:16\") B --- |\"initialCapacoty\"| b(\"æŒ‡å®šåˆå§‹åŒ–å®¹é‡ï¼š30\") C --- |\"initialCapacotyloadFactor\"| c(\"æŒ‡å®šåˆå§‹åŒ–å®¹é‡ã€è´Ÿè½½ç‡\") D --- |\"Map map\"| d(\"ä»¥æŒ‡å®šmapæ„é€ æ–°map\") D -.- ci(\"* æ³¨æ„ï¼šä¸ä¸Šè¿°ä»…åˆ›å»ºç©ºHashMapä¸åŒï¼Œæ­¤æ–¹æ³•å†…éƒ¨è°ƒç”¨äº†put()å­˜å€¼çœŸæ­£è¿›è¡Œäº†åˆå§‹åŒ–ã€‚\"):::info classDef p fill:#ddaebd classDef lp fill: #f4e4e9 classDef info fill:#f6f6f7,color:#737379,stroke-dasharray: 3 3, stroke-width: 2px ï¼ˆ1ï¼‰HashMap() æ— å‚æ•°çš„æ„é€ æ–¹æ³•/** * Constructs an empty HashMap with the default initial capacity(16) and the default load factor (0.75). * ä»¥é»˜è®¤åˆå§‹å®¹é‡(16)å’Œé»˜è®¤è´Ÿè½½ç‡(0.75)ï¼Œæ„é€ ä¸€ä¸ªç©ºçš„HashMapã€‚ */public HashMap() &#123; // ğŸ”» å°†è´Ÿè½½ç‡èµ‹ä¸ºé»˜è®¤å€¼ã€‚ this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted&#125; ï¼ˆ2ï¼‰HashMap(20) å¸¦åˆå§‹å®¹é‡çš„æ„é€ æ–¹æ³•ï¼š/** * Constructs an empty HashMap with the specified initial capacity and the default load factor (0.75). * ä»¥ç‰¹å®šçš„åˆå§‹å®¹é‡å’Œé»˜è®¤çš„è´Ÿè½½ç‡(0.75)ï¼Œæ„é€ ä¸€ä¸ªç©ºçš„HashMap * * @param initialCapacity åˆå§‹å®¹é‡ * @throws IllegalArgumentException åˆå§‹å®¹é‡ä¸ºè´Ÿå€¼æ—¶æŠ›å‡ºéæ³•æ•°æ®å¼‚å¸¸ã€‚ */ public HashMap(int initialCapacity) &#123; // ğŸ”» è°ƒç”¨äº†å¸¦åˆå§‹å®¹é‡ã€è´Ÿè½½ç‡çš„æ„é€ æ–¹æ³•ï¼ˆè¯¦è§ä¸‹æ–‡(3)ï¼‰ this(initialCapacity, DEFAULT_LOAD_FACTOR); &#125; ï¼ˆ3ï¼‰HashMap(20, 0.5f)- HashMap() å¸¦åˆå§‹å®¹é‡ã€è´Ÿè½½ç‡çš„æ„é€ æ–¹æ³•/** * Constructs an empty HashMap with the specified initial capacity and load factor. * ä»¥ç‰¹å®šçš„åˆå§‹å®¹é‡å’Œè´Ÿè½½ç‡æ„é€ ä¸€ä¸ªç©ºçš„HashMapã€‚ * * @param initialCapacity åˆå§‹åŒ–å®¹é‡ * @param loadFactor è´Ÿè½½ç‡ * @throws IllegalArgumentException if the initial capacity is negative * or the load factor is nonpositive * å½“åˆå§‹å®¹é‡ä¸ºè´Ÿå€¼ã€æˆ–è´Ÿè½½ç‡ä¸ºéæ­£æ—¶æŠ›å‡ºéæ³•æ•°æ®å¼‚å¸¸ã€‚ */public HashMap(int initialCapacity, float loadFactor) &#123; // ğŸ”´ ä¸€ã€åˆ¤æ–­ä¼ å…¥å‚æ•°çš„åˆæ³•æ€§ // ğŸ”¹ åˆå§‹å®¹é‡å€¼éè´Ÿæ•° if (initialCapacity &lt; 0) throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; + initialCapacity); // ğŸ”¹ åˆå§‹å®¹é‡å€¼ä¸è¶…è¿‡æœ€å¤§å®¹é‡ if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; // ğŸ”¹ è´Ÿè½½ç‡å¤§äº0ä¸”ä¸ºæ•°å­— if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&quot;Illegal load factor: &quot; + loadFactor); // ğŸ”´ äºŒã€å¼€å§‹èµ‹å€¼ // ğŸ”¹ ä¸ºè´Ÿè½½ç‡èµ‹å€¼ this.loadFactor = loadFactor; // ğŸ”¹ ä¸ºä¸´ç•Œå€¼èµ‹å€¼ï¼šä½¿ç”¨tableSizeFor()å°†ç»™å®šæ•°å€¼è°ƒæ•´ä¸º2çš„æ¬¡å¹‚æ•°ã€‚ this.threshold = tableSizeFor(initialCapacity);&#125; - tableSizeFor() è¿”å›æœ€æ¥è¿‘ç»™å®šç›®æ ‡å®¹é‡çš„äºŒæ¬¡å¹‚æ•°å€¼ã€‚/** * Returns a power of two size for the given target capacity. * è¿”å›ç»™å®šç›®æ ‡å®¹é‡çš„äºŒæ¬¡å¹‚æ•°ã€‚ */static final int tableSizeFor(int cap) &#123; int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;&#125;/* ä»¥ä¸‹ä¸ºå¤‡æ³¨ï¼š ------------------------------------------------- * è¯¥ä½è¿ç®—ç”¨äºæ±‚å‡ºé«˜ä½1ä¹‹åæ¯ä½éƒ½ä¸º1çš„ç»“æœã€‚ å› ä¸ºå°†æ¯ä½å˜ä¸º1ï¼Œåˆ™åŠ ä¸Š1ååˆšå¥½æ˜¯ä¸€ä¸ªäºŒæ¬¡å¹‚æ•°ã€‚ å¦‚(0000 1000)ï¼Œä½¿å…¶ç¬¬ä¸€ä½1åé¢éƒ½ä¸º1ï¼Œå³(0000 1111) ------------------------------------------------- */ // å¦‚ï¼ŒinitialCapacity = 9 // ğŸ”´ å°† n - 1 /* ğŸ”¸ åŸå› ï¼šä¸ºäº†å¤„ç†nåˆšå¥½æ˜¯äºŒæ¬¡å¹‚æ•°çš„æƒ…å†µã€‚ è‹¥nå·²ç»æ˜¯2çš„Næ¬¡æ–¹äº†ï¼ŒæŒ‰ç…§é€»è¾‘å˜1ä¹‹åå†åŠ 1ï¼Œç»“æœå°±ä¼šå˜æˆnçš„2å€äº†ï¼Œä¸åº”æœ‰çš„ç»“æœä¸ä¸€è‡´ã€‚å¦‚ n=16ï¼ˆ0001 0000ï¼‰ï¼Œä½è¿ç®—å n=31ï¼ˆ0001 1111ï¼‰*/ int n = cap -1; // n = 8 // ğŸ”´ ä½œä½è¿ç®—ï¼š1. æ— ç¬¦å·ä½ç§» 2. ä¸nä½œæˆ–çš„ä½è¿ç®—ã€‚ n |= n &gt;&gt;&gt; 1; n = 0000 1000 n = 0000 0100 n = 0000 1100 n |= n &gt;&gt;&gt; 2; n = 0000 1100 n = 0000 0011 n = 0000 1111 // =15 n |= n &gt;&gt;&gt; 4; n = 0000 1111 n = 0000 0000 n = 0000 1111 n |= n &gt;&gt;&gt; 8; n = 0000 1111 n = 0000 0000 n = 0000 1111 n |= n &gt;&gt;&gt; 16; // ğŸ”¸ å› ä¸ºintæ˜¯32ä½çš„ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°16å³å¯. // ğŸ”´ è¿”å›ä½ç§»ç»“æœn + 1 return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUN_CAPACITY : n + 1; n &lt; 0, åˆ™è¿”å› n = 1 n &gt;= 0, ä¸” n &gt;= æœ€å¤§å®¹é‡, åˆ™è¿”å›æœ€å¤§å®¹é‡ n &gt;= 0, ä¸” n &lt; æœ€å¤§å®¹é‡, åˆ™è¿”å› n + 1 ï¼ˆ=16ï¼‰ ï¼ˆ3ï¼‰HashMap(map)- HashMap() å¸¦mapçš„æ„é€ æ–¹æ³• /** * Constructs a new HashMap with the same mappings as the specified Map. * The HashMap is created with default load factor (0.75) and an initial capacity sufficient to hold the mappings in the specified Map. * ä½¿ç”¨ä¸æŒ‡å®šMapç›¸åŒçš„æ˜ å°„æ„é€ æ–°çš„HashMapã€‚ * æ­¤HashMapç”±ï¼šé»˜è®¤è´Ÿè½½ç‡(0.75)ã€è¶³å¤Ÿçš„åˆå§‹å®¹é‡ï¼ˆè¶³ä»¥å­˜ä¸‹æŒ‡å®šMapï¼‰åˆ›å»ºã€‚ * * @param m the map whose mappings are to be placed in this map * @å‚æ•°ï¼š mï¼ŒåŸmap * @throws NullPointerException if the specified map is null * @å¼‚å¸¸ï¼š å½“åŸmapä¸ºç©ºæ—¶æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ */public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; // ğŸ”» å°†è´Ÿè½½ç‡èµ‹ä¸ºé»˜è®¤å€¼ã€‚ this.loadFactor = DEFAULT_LOAD_FACTOR; // ğŸ”» è°ƒç”¨putMapEntries()ï¼Œå°†åŸæœ‰mapå­˜å…¥æ–°mapã€‚ putMapEntries(m, false);&#125; - putMapEntries() èµ‹å€¼å¹¶åˆå§‹åŒ–å‡½æ•°/** * Implements Map.putAll and Map constructor. * èµ‹å€¼å¹¶æ„é€ å‡½æ•°ã€‚ * * @param m the map * @å‚æ•°ï¼š mï¼Œä¼ å…¥çš„map * @param evict false when initially constructing this map, else true (relayed to method afterNodeInsertion). * @å‚æ•°ï¼š evictï¼Œé¦–æ¬¡åˆ›å»ºæ­¤mapæ—¶è¿”å›falseï¼Œéé¦–æ¬¡åˆ›å»ºè¿”å›trueã€‚ */final void putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) &#123; int s = m.size(); if (s &gt; 0) &#123; // ğŸ”´ è‹¥åŸMapä¸ºç©ºï¼šä¸ºæ–°Mapè®¾ç½®åˆå§‹å®¹é‡ã€ä¸´ç•Œå€¼ã€‚ if (table == null) &#123; // pre-size // ğŸ”¹ float ft = ((float)s / loadFactor) + 1.0F; // ğŸ”¹ int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY); // ğŸ”¹ è‹¥åˆå§‹å®¹é‡ &gt; ä¸´ç•Œå€¼ï¼Œè°ƒç”¨tableSizeForæ–¹æ³•ï¼Œå°†ä¸´ç•Œå€¼é‡æ–°è®¾ç½®ä¸ºï¼šæœ€æ¥è¿‘å®¹é‡çš„2æ¬¡å¹‚æ•°ã€‚ if (t &gt; threshold) threshold = tableSizeFor(t); &#125; // ğŸ”´ è‹¥åŸmapä¸ä¸ºç©ºã€ä¸”Mapå¤§å°è¶…è¿‡é»˜è®¤çš„ä¸´ç•Œå€¼ï¼šæ‰©å®¹ã€‚ else if (s &gt; threshold) resize(); // ğŸ”´ èµ‹å€¼ï¼šéå†åŸMapçš„entryï¼Œé€ä¸ªèµ‹å€¼ã€‚ for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) &#123; K key = e.getKey(); V value = e.getValue(); // ğŸ”¹ putVal(hash(key), key, value, false, evict); &#125; &#125;&#125; - HashMap()","categories":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://equnee.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://equnee.github.io/tags/Java/"},{"name":"HashMap","slug":"HashMap","permalink":"https://equnee.github.io/tags/HashMap/"},{"name":"TreeNode","slug":"TreeNode","permalink":"https://equnee.github.io/tags/TreeNode/"}]},{"title":"ğŸŒ· è®¾è®¡æ¨¡å¼ - è´£ä»»é“¾","slug":"note/Design-pattern/design-pattern_Chain","date":"2023-03-08T15:14:10.467Z","updated":"2023-03-08T15:18:36.714Z","comments":true,"path":"note/Design-pattern/design-pattern_Chain/","link":"","permalink":"https://equnee.github.io/note/Design-pattern/design-pattern_Chain/","excerpt":"","text":"æ¥è‡ªã€Šç§’æ‡‚è®¾è®¡æ¨¡å¼ã€‹","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://equnee.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://equnee.github.io/tags/Java/"},{"name":"Chain","slug":"Chain","permalink":"https://equnee.github.io/tags/Chain/"}]},{"title":"ğŸŒ· è®¾è®¡æ¨¡å¼ - å•ä¾‹","slug":"note/Design-pattern/design-pattern_Singleton","date":"2023-03-07T17:32:40.177Z","updated":"2023-03-08T15:26:08.159Z","comments":true,"path":"note/Design-pattern/design-pattern_Singleton/","link":"","permalink":"https://equnee.github.io/note/Design-pattern/design-pattern_Singleton/","excerpt":"","text":"æ¥è‡ªã€Šç§’æ‡‚è®¾è®¡æ¨¡å¼ã€‹ ä¸€. å­¤ç‹¬çš„å¤ªé˜³æˆ‘ä»¬å¯ä»¥æŠŠå¤ªé˜³ç³»çœ‹ä½œä¸€ä¸ªåºå¤§çš„ç³»ç»Ÿï¼Œå…¶ä¸­æœ‰å„ç§å„æ ·çš„å¯¹è±¡å­˜åœ¨ï¼Œä¸°å¯Œå¤šå½©çš„å®ä¾‹é€ å°±äº†ç³»ç»Ÿçš„ç¾å¥½ã€‚è¿™ä¸ªç³»ç»Ÿé‡Œçš„æŸäº›å®ä¾‹æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æˆ‘ä»¬èµ–ä»¥ç”Ÿå­˜çš„æ’æ˜Ÿå¤ªé˜³ã€‚ ä¸å…¶ä»–è¡Œæ˜Ÿæˆ–å«æ˜Ÿä¸åŒçš„æ˜¯ï¼Œå¤ªé˜³æ˜¯å¤ªé˜³ç³»å†…å”¯ä¸€çš„æ’æ˜Ÿå®ä¾‹ã€‚ä½†å€˜è‹¥å¤©ä¸Šæœ‰9ä¸ªå¤ªé˜³ï¼Œé‚£ä¹ˆå°†ä¼šå¸¦æ¥ä¸€åœºç¾éš¾ã€‚å¤ªé˜³ä¸å¤šä¸å°‘ä»…æ­¤ä¸€ä¾‹ã€‚ äºŒ. é¥¿æ±‰é€ æ—¥%%{ init: { 'themeVariables': { 'fontSize': '22px', 'fontFamily': 'Noto Serif SC' } } }%% graph LR T((\"é¥¿æ±‰é€ æ—¥\")):::b T --> A([\"1. å¼€å§‹\"]):::p T --> B([\"2. æ„é€ æ–¹æ³•ç§æœ‰åŒ–\"]):::p T --> C([\"3. è‡ªæœ‰æ°¸æœ‰\"]):::p T --> D([\"4. å…¬å¼€è®¿é—®\"]):::p T --> E([\"5. æ€»ç»“\"]):::b A --> a(\"æ—¢ç„¶å¤ªé˜³ç³»é‡Œåªæœ‰ä¸€ä¸ªå¤ªé˜³ï¼Œå°±éœ€è¦ä¸¥æ ¼æŠŠæ§å¤ªé˜³å®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚\"):::lp a -.-> at([\"Public class Sun {} // ä¸€ä¸ªæœ€ç®€å•çš„Sunç±»\"]):::lg B --> b(\"å¤ªé˜³åªæœ‰ä¸€ä¸ªï¼Œä¸èƒ½éšæ„åˆ›å»ºå®ä¾‹ã€‚ä½†ç”±äºJavaä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ— å‚æ„é€ å™¨ï¼Œå› æ­¤å¿…é¡»ç¦æ­¢å¤–éƒ¨è°ƒç”¨æ„é€ å™¨*ã€‚\"):::lp b -.-> bt([\"private Sun(){}\"]):::lg C --> c(\"è®©å®ƒåœ¨ç±»åŠ è½½æ—¶å°±è‡ªå·±åˆ›å»ºè‡ªå·±ï¼Œå¹¶ä½¿å…¶è‡ªæœ‰æ°¸æœ‰\"):::lp c -.-> ct([\"private static final Sun sun = new Sun();\"]):::lg D --> d(\"ä½¿ç”¨é™æ€æ–¹æ³•*getInstance()æ¥è·å–å¤ªé˜³çš„å•ä¾‹å¯¹è±¡å¹¶å°†å…¶è®¾ç½®ä¸ºâ€œpublicâ€ä»¥æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨\"):::lp d -.- dt([\"public static Sun getInstance(){ return sun; }\"]):::lg d -.- d2t[\"*å¦‚åŒç¨‹åºå…¥å£çš„é™æ€æ–¹æ³•main(), ä¸éœ€è¦ä»»ä½•å¯¹è±¡å¼•ç”¨å°±èƒ½è¢«è®¿é—®\"]:::info T -..-> e(\"ï¼ˆè¿˜å¯ä»¥æ·»åŠ å…¶ä»–åŠŸèƒ½æ–¹æ³•ï¼Œå¦‚å‘å…‰å’Œå‘çƒ­ç­‰ï¼‰\"):::info d --> et(\"æœ€åï¼Œä¸ç®¡è°å¾—åˆ°æˆ–å¾—åˆ°å‡ æ¬¡ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå¤ªé˜³å®ä¾‹ï¼Œè¿™æ ·å°±ç¡®ä¿äº†æ•´ä¸ªå¤ªé˜³ç³»ä¸­æ’æ˜Ÿå¤ªé˜³çš„å”¯ä¸€åˆæ³•æ€§ï¼Œä»–äººæ— æ³•ä¼ªé€ ã€‚\"):::lb E --> e2t(\"è¿™å°±æ˜¯â€œé¥¿æ±‰æ¨¡å¼â€(eager initialization)ï¼šå³åœ¨åˆå§‹é˜¶æ®µ(static)å°±ä¸»åŠ¨è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¹¶æ—¶åˆ»ä¿æŒä¸€ç§æ¸´æ±‚çš„çŠ¶æ€(public)ï¼Œæ— è®ºæ­¤å•ä¾‹æ˜¯å¦æœ‰äººä½¿ç”¨ã€‚\"):::lb classDef p fill:#ddaebd classDef b fill:#aab7d2 classDef lp fill:#f4e4e9 classDef lb fill:#d9dfeb classDef lg fill:#cde2da classDef info fill:#f6f6f7,color:#5a5a5f,stroke-dasharray: 3 3, stroke-width: 2px 1. å¼€å§‹ public class Sun &#123;&#125; 2. æ„é€ æ–¹æ³•ç§æœ‰åŒ– æ¥ä¸‹æ¥æˆ‘ä»¬å¾—ç¡®ä¿ä»»ä½•äººéƒ½ä¸èƒ½åˆ›å»ºå¤ªé˜³çš„å®ä¾‹ï¼Œå¦åˆ™ä¸€æ—¦ç¨‹åºå‘˜è°ƒç”¨ä»£ç â€œnew Sun()â€ï¼Œå¤©ç©ºå°±ä¼šå‡ºç°å¤šä¸ªå¤ªé˜³ï¼Œä¾¿åˆéœ€è¦â€œåç¾¿â€å»è§£å†³äº†ã€‚ å®ä¾‹åŒ–å·¥ä½œå®Œå…¨å½’å±äºå†…éƒ¨äº‹åŠ¡ï¼Œä»»ä½•å¤–éƒ¨ç±»éƒ½æ— æƒå¹²é¢„ public class Sun &#123; private Sun()&#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; &#125; 3. è‡ªæœ‰æ°¸æœ‰ public class Sun &#123; private static final Sun sun = new Sun(); // è‡ªæœ‰æ°¸æœ‰çš„å¤ªé˜³å•ä¾‹ private Sun()&#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; &#125; å…³é”®å­— è¯´æ˜ private ç¡®ä¿å¤ªé˜³å®ä¾‹çš„ç§æœ‰æ€§ã€ä¸å¯è§æ€§å’Œä¸å¯è®¿é—®æ€§ï¼› static ç¡®ä¿å¤ªé˜³çš„é™æ€æ€§ï¼Œå°†å¤ªé˜³æ”¾å…¥å†…å­˜é‡Œçš„é™æ€åŒºï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±åˆå§‹åŒ–äº†ï¼Œå®ƒä¸ç±»åŒåœ¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ä¸ç±»åŒæ—¶æœŸä¸”æ—©äºå†…å­˜å †ä¸­çš„å¯¹è±¡å®ä¾‹åŒ–çš„ï¼Œè¯¥å®ä¾‹åœ¨å†…å­˜ä¸­æ°¸ç”Ÿï¼Œå†…å­˜åƒåœ¾æ”¶é›†å™¨(Garbage Collector, GC)ä¹Ÿä¸ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶ï¼› final ç¡®ä¿è¿™ä¸ªå¤ªé˜³æ˜¯å¸¸é‡ã€æ’é‡ï¼Œå®ƒæ˜¯ä¸€é¢—ç»ˆæçš„æ’æ˜Ÿï¼Œå¼•ç”¨ä¸€æ—¦è¢«èµ‹å€¼å°±ä¸èƒ½å†ä¿®æ”¹ï¼› new åˆå§‹åŒ–å¤ªé˜³ç±»çš„é™æ€å®ä¾‹ï¼Œå¹¶èµ‹äºˆé™æ€å¸¸é‡sunã€‚ 4. å…¬å¼€è®¿é—® å•ä¾‹çš„å¤ªé˜³å¯¹è±¡å†™å¥½äº†ï¼Œå¯ä¸€åˆ‡çš†æ˜¯ç§æœ‰çš„ï¼Œå¤–éƒ¨å¦‚ä½•è®¿é—®ï¼Ÿâ€”â€” ä½¿ç”¨é™æ€æ–¹æ³•getInstance()æ¥è·å–å¤ªé˜³çš„å•ä¾‹å¯¹è±¡ã€‚ public class Sun &#123; private static final Sun sun = new Sun(); // è‡ªæœ‰æ°¸æœ‰çš„å¤ªé˜³å•ä¾‹ private Sun()&#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; public static Sun getInstance()&#123; // é˜³å…‰æ™®ç…§ï¼Œæ–¹æ³•å…¬å¼€åŒ– return sun; &#125; &#125; ä¸‰. æ‡’æ±‰çš„é˜Ÿä¼%%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC' } } }%% graph LR T((æ‡’æ±‰çš„é˜Ÿä¼)):::b T --> A([\"1. ç”¨æ—¶æ‰åˆ›å»º\"]):::p T --> B([\"2. æ’é˜Ÿï¼ˆåŒæ­¥é”ï¼‰\"]):::p T --> C([\"3. éœ€è¦æ—¶å†æ’é˜Ÿï¼ˆåŒæ£€é”ï¼‰\"]):::p A --> a(\"è‹¥æ— è¯·æ±‚å°±ä¸å®ä¾‹åŒ–ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´\"):::lp a -.-> at([\"å»æ‰ finalif(sun == null)\"]):::lg B --> b(\"ç”±äºå¤šçº¿ç¨‹æ—¶çš„ç¼ºé™·ï¼šè¯·æ±‚æ–¹æ³•åŠ ä¸ŠåŒæ­¥é”synchronized\"):::lp b -.- bt2([\"public static synchronized Sun getInstance() \"]):::lg b -.-> bt3(\"åŠ é”åæŸçº¿ç¨‹è°ƒç”¨å‰å¿…é¡»è·å–åŒæ­¥é”ï¼Œè°ƒç”¨å®Œä¼šé‡Šæ”¾é”ç»™å…¶ä»–çº¿ç¨‹ç”¨ï¼Œä¹Ÿå°±æ˜¯ç»™è¯·æ±‚æ’é˜Ÿã€‚\"):::info C --> c(\"ä¸ºäº†è§£å†³çº¿ç¨‹é˜»å¡ï¼šä½¿ç”¨2ä¸ªåµŒå¥—çš„åˆ¤ç©ºé€»è¾‘\"):::lp c -.- ct([\"private volatile static Sun sun;if(sun = null){ synchronized(){if(sun == null){sun = new Sun();}\"]):::lg c -.- ct2[\"1. å¤–å±‚æ”¾å®½å…¥å£ï¼Œä¿è¯çº¿ç¨‹å¹¶å‘çš„é«˜æ•ˆæ€§2. å†…å±‚åŠ é”åŒæ­¥ï¼Œä¿è¯å®ä¾‹åŒ–çš„å•æ¬¡è¿è¡Œ\"]:::info classDef p fill:#ddaebd classDef b fill:#aab7d2 classDef lp fill:#f4e4e9 classDef lb fill:#d9dfeb classDef lg fill:#cde2da classDef info fill:#f6f6f7,color:#433f40,stroke-dasharray: 3 3, stroke-width: 2px 1. ç”¨æ—¶æ‰åˆ›å»º å•ä¾‹çš„â€œé¥¿æ±‰æ¨¡å¼â€ï¼Œè®©å¤ªé˜³ä¸€å¼€å§‹å°±å‡†å¤‡å°±ç»ªï¼Œéšæ—¶ä¾›åº”å…è´¹æ—¥å…‰ã€‚ ç„¶è€Œï¼Œå¦‚æœå§‹ç»ˆæ²¡äººè·å–æ—¥å…‰ï¼Œé‚£å°±ç™½é€ äº†å¤ªé˜³ï¼Œç™½ç™½æµªè´¹ä¸€å—å†…å­˜åŒºåŸŸã€‚ç±»ä¼¼äºå•†å®¶è´§å“æ»é”€çš„æƒ…å†µï¼Œè´§æ¶ä¸Šå †æ”¾ç€å•†å“å´æ²¡äººä¹°ï¼Œç™½ç™½æµªè´¹ç©ºé—´ã€‚å› æ­¤ï¼Œå•†å®¶ä¸ºäº†é™ä½é£é™©ï¼Œè§„å®šæœ‰äº›å•†å“å¿…é¡»æå‰é¢„è®¢ï¼Œè¿™å°±æ˜¯â€œæ‡’æ±‰æ¨¡å¼â€(lazy initialization)ã€‚ public class Sun &#123; private static Sun sun; // è¿™é‡Œä¸è¿›è¡Œå®ä¾‹åŒ– private Sun()&#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; public static Sun getInstance() &#123; if(sun == null) &#123; // å¦‚æœæ— æ—¥æ‰é€ æ—¥ sun = new Sun(); &#125; return sun; &#125;&#125; å…³é”®å­— è¯´æ˜ å»æ‰ final ä¸€å¼€å§‹å¹¶æ²¡æœ‰é€ å¤ªé˜³ï¼Œæ‰€ä»¥å»æ‰äº†å…³é”®å­—finalã€‚ ç”¨æ—¶æ‰å®ä¾‹åŒ– ä»…åœ¨æŸçº¿ç¨‹ç¬¬ä¸€æ¬¡è°ƒç”¨ç¬¬9è¡Œçš„getInstance()æ–¹æ³•æ—¶æ‰ä¼šè¿è¡Œå¯¹å¤ªé˜³è¿›è¡Œå®ä¾‹åŒ–çš„é€»è¾‘ä»£ç ï¼Œä¹‹åå†è¯·æ±‚å°±ç›´æ¥è¿”å›æ­¤å®ä¾‹äº†ã€‚â—ï¸ç¼ºç‚¹ï¼šåˆæ¬¡è¯·æ±‚æ—¶é€Ÿåº¦è¾ƒä¹‹å‰çš„é¥¿æ±‰åˆå§‹åŒ–æ¨¡å¼æ…¢ï¼Œå› ä¸ºè¦æ¶ˆè€—CPUèµ„æºå»ä¸´æ—¶é€ è¿™ä¸ªå¤ªé˜³ã€‚ 2. æ’é˜Ÿ å› ä¸ºä¸Šè¿°ç¨‹åºåœ¨å¤šçº¿ç¨‹æ¨¡å¼ä¸‹æœ‰ç¼ºé™·ï¼šå¹¶å‘è¯·æ±‚æ—¶åˆ¤ç©ºé€»è¾‘ä¼šåŒæ—¶æˆç«‹ï¼Œå¯¼è‡´å¤šæ¬¡å®ä¾‹åŒ–å¤ªé˜³ã€å¤šæ¬¡èµ‹å€¼ï¼Œè¿èƒŒå•ä¾‹ç†å¿µã€‚ public class Sun &#123; private static Sun sun; // è¿™é‡Œä¸è¿›è¡Œå®ä¾‹åŒ– private Sun()&#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; public static synchronized Sun getInstance() &#123; // æ­¤å¤„åŠ å…¥åŒæ­¥é” if(sun == null) &#123; // å¦‚æœæ— æ—¥æ‰é€ æ—¥ sun = new Sun(); &#125; return sun; &#125;&#125; å…³é”®å­— è¯´æ˜ synchronized å°†å¤ªé˜³ç±»Sunä¸­ç¬¬9è¡Œçš„getInstance()æ”¹æˆäº†åŒæ­¥æ–¹æ³•ï¼Œå¦‚æ­¤å¯é¿å…å¤šçº¿ç¨‹é™·é˜±ã€‚ 3. éœ€è¦æ—¶å†æ’é˜Ÿ å¦‚æœä»…ä¸ºäº†å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œç›´æ¥åŠ é”æ’é˜Ÿ,ä½¿ç”¨synchronizedè®©æ‰€æœ‰è¯·æ±‚æ’é˜Ÿç­‰å€™ï¼šä¼šé€ æˆçº¿ç¨‹é˜»å¡ï¼Œèµ„æºä¸æ—¶é—´è¢«ç™½ç™½æµªè´¹ã€‚ public class Sun &#123; private volatile static Sun sun; private Sun() &#123; // æ„é€ æ–¹æ³•ç§æœ‰åŒ– &#125; public static Sun getInstance() &#123; // åå±±å…¥å£ if(sun = null)&#123; synchronized(Sun.class)&#123; // è§‚æ—¥è€…è¿›è¡Œæ’é˜Ÿ if(sun == null)&#123; sun = new Sun(); // åªæœ‰æ’å¤´å…µé€ äº†å¤ªé˜³ï¼Œæ—­æ—¥ä¸œå‡ &#125; &#125; &#125; return sun; // â€¦â€¦é˜³å…‰æ™®ç…§ï¼Œå…¶ä½™äººä¸å¿…å†é€ æ—¥ &#125;&#125; å…³é”®å­— è¯´æ˜ å»æ‰ final ç¬¬3è¡Œå¯¹sunå˜é‡çš„å®šä¹‰ä¸å†ä½¿ç”¨finalå…³é”®å­—ï¼Œè¯´æ˜å®ƒä¸å†æ˜¯å¸¸é‡ï¼Œè€Œæ˜¯éœ€è¦åç»­èµ‹å€¼çš„å˜é‡ï¼› volatile å…³é”®å­—volatileå¯¹é™æ€å˜é‡çš„ä¿®é¥°åˆ™èƒ½ä¿è¯sunå˜é‡å€¼åœ¨å„çº¿ç¨‹è®¿é—®æ—¶çš„åŒæ­¥æ€§ã€å”¯ä¸€æ€§ã€‚ å»æ‰å…¥å£çš„åŒæ­¥é” å¯¹äºç¬¬9è¡Œçš„getInstance()æ–¹æ³•ï¼Œå»æ‰æ–¹æ³•ä¸Šçš„å…³é”®å­—synchronizedï¼Œä½¿å¤§å®¶éƒ½èƒ½åŒæ—¶è¿›å…¥æ–¹æ³•å¹¶å¯¹å…¶è¿›è¡Œå¼€å‘ã€‚ åˆ¤ç©ºé€»è¾‘1 æœ‰äº›äººï¼ˆçº¿ç¨‹ï¼‰èµ·æ—©å°±æ˜¯ä¸ºäº†è§‚çœ‹æ—¥å‡ºï¼Œé‚£ä¹ˆè¿™äº›äººä¼šé€šè¿‡ç¬¬10è¡Œçš„åˆ¤ç©ºé€»è¾‘è¿›å…¥è§‚æ—¥å°ã€‚ åˆ¤ç©ºé€»è¾‘2 åœ¨ç¬¬12è¡Œæˆ‘ä»¬åˆè¿›è¡Œä¸€æ¬¡åˆ¤ç©ºé€»è¾‘ï¼Œè¿™å°±æ„å‘³ç€åªæœ‰é˜Ÿä¼ä¸­çš„ç¬¬ä¸€ä¸ªäººé€ äº†å¤ªé˜³ï¼Œæœ‰å¹¸çœ‹åˆ°äº†æ—¥å‡ºçš„ç¬¬ä¸€ç¼•é˜³å…‰ï¼Œè€Œåé¢çš„äººåˆ™ç»Ÿç»Ÿç¦»å¼€ï¼Œç›´åˆ°ç¬¬17è¡Œå¾—åˆ°å·²ç»é€ å¥½çš„å¤ªé˜³ã€‚ æœ€åï¼šå¤ªé˜³é«˜é«˜å‡èµ·ï¼Œå®ä¾‹åŒ–æ“ä½œå®Œæ¯•ï¼Œèµ·æ™šçš„äººä»¬éƒ½æ— é¡»å†è¿›å…¥è§‚æ—¥å°ï¼Œç›´æ¥è·å–å¤ªé˜³å®ä¾‹å³å¯ï¼Œæ¸©æš–é˜³å…‰æ™®ç…§å¤§åœ°ã€‚ å››. å¤§é“è‡³ç®€ç›¸æ¯”â€œæ‡’æ±‰æ¨¡å¼â€ï¼Œå…¶å®æ›´å¸¸ç”¨â€œé¥¿æ±‰æ¨¡å¼â€ï¼Œå› ä¸ºè¿™ä¸ªå•ä¾‹è¿Ÿæ—©æ˜¯è¦è¢«å®ä¾‹åŒ–å ç”¨å†…å­˜çš„ï¼Œå»¶è¿Ÿæ‡’åŠ è½½çš„æ„ä¹‰å¹¶ä¸å¤§ï¼ŒåŠ é”è§£é”åè€Œæ˜¯ä¸€ç§èµ„æºæµªè´¹ï¼ŒåŒæ­¥æ›´æ˜¯ä¼šé™ä½CPUçš„åˆ©ç”¨ç‡ï¼Œä½¿ç”¨ä¸å½“çš„è¯åè€Œä¼šå¸¦æ¥ä¸å¿…è¦çš„é£é™©ã€‚è¶Šç®€å•çš„åŒ…å®¹æ€§è¶Šå¼ºï¼Œè€Œè¶Šå¤æ‚çš„åè€Œè¶Šå®¹æ˜“å‡ºé”™ã€‚ å•ä¾‹æ¨¡å¼çš„ç±»ç»“æ„ï¼š classDiagram class Singleton{ - instance : singleton - Sigleton() + getInstance() Singleton } Singleton --> Singleton Singletonï¼ˆå•ä¾‹ï¼‰ï¼šåŒ…å«ä¸€ä¸ªè‡ªå·±çš„ç±»å®ä¾‹çš„å±æ€§ï¼Œå¹¶æŠŠæ„é€ æ–¹æ³•ç”¨privatå…³é”®å­—éšè—èµ·æ¥ï¼Œå¯¹å¤–åªægetInstance()æ–¹æ³•ä»¥è·å¾—è¿™ä¸ªå•ä¾‹å¯¹è±¡ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://equnee.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://equnee.github.io/tags/Java/"},{"name":"singleton","slug":"singleton","permalink":"https://equnee.github.io/tags/singleton/"}]},{"title":"Macè¿œç¨‹è¿æ¥Windowsï¼ˆMicrosoft Remote Desktopï¼‰","slug":"guide/mac_mrd_windows","date":"2021-03-25T07:49:07.000Z","updated":"2023-03-07T18:09:04.157Z","comments":true,"path":"guide/mac_mrd_windows/","link":"","permalink":"https://equnee.github.io/guide/mac_mrd_windows/","excerpt":"","text":"æ‘˜è¦: åŒæ—¶å¸¦ä¸¤å°ç”µè„‘å‡ºé—¨å¾ˆéº»çƒ¦ï¼Œäºæ˜¯é€‰æ‹©åœ¨Macä¸Šä½¿ç”¨ Microsoft Remote Desktop è¿œç¨‹è¿æ¥ä½¿ç”¨ä¸å¸¦å‡ºé—¨çš„ Windowsï¼Œä»æ­¤åªéœ€è¦æŠŠWindowsæ”¾åœ¨å®¶é‡Œè¿æ¥ç”µæºå’Œwifiä¸€ç›´æ”¾ç€å°±è¡Œï¼é¡ºä¾¿æ•´ç†äº†ä¸€äº›åˆ«äººé‡åˆ°çš„é”™è¯¯å’Œè§£å†³æ–¹æ³•ã€‚ æ—¥æœŸ: 2021/3/25 ç¯å¢ƒ : MacOS 11.2.2 + Windows10 ä¸€. è½¯ä»¶ä¸‹è½½ä¸‹è½½ Microsoft Remote Desktopï¼Œæ ¹æ®æƒ…å†µä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„appï¼š ä½¿ç”¨ Windows æ§åˆ¶ windowsï¼š&gt;&gt; å®˜ç½‘ä¸‹è½½ ä½¿ç”¨ Mac æ§åˆ¶ windowsï¼š App Store ä¸‹è½½ï¼Œä»…å›½å¤–çš„åº”ç”¨å•†åº—æä¾›ä¸‹è½½ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨å›½å¤–çš„ AppleIDï¼Œå¯å‚è€ƒ&gt; &gt; å›½å¤–AppleIDç”³è¯·æ–¹æ³•ã€‚ å…¶ä»–æ¸ é“ä¸‹è½½ï¼ˆä¿ºä¹Ÿæ²¡è¯•è¿‡ äºŒ. åˆ›å»ºè¿æ¥2.1 Windows é…ç½® é¦–å…ˆç¡®ä¿å°†è¢«æ§åˆ¶çš„ Windows å¼€å¯äº†è¿œç¨‹æ¡Œé¢è¿æ¥é…ç½®ï¼š ï¼ˆ1ï¼‰ç³»ç»Ÿå±æ€§ è®¾ç½®äº†ç³»ç»Ÿå±æ€§ä¸ºå…è®¸è¿œç¨‹æ¡Œé¢è¿æ¥ è‹¥é€‰é¡¹éƒ½æ˜¯ç°è‰²æ— æ³•å…è®¸è¿œç¨‹è¿æ¥ï¼Œ&gt; å‚è€ƒè¿™é‡Œã€‚ è¿è¡Œ gpedit.msc å›è½¦æ‰“å¼€æœ¬åœ°ç»„ç­–ç•¥ç¼–è¾‘å™¨,åœ¨å·¦ä¾§çš„åˆ—è¡¨ä¸­ä¾æ¬¡å±•å¼€ï¼šè®¡ç®—æœºé…ç½®&gt;ç®¡ç†æ¨¡æ¿&gt;Windowsç»„ä»¶&gt;è¿œç¨‹æ¡Œé¢ä¼šè¯ä¸»æœº&gt;è¿æ¥ åŒå‡»æ‰“å¼€å³ä¾§çš„â€å…è®¸ç”¨æˆ·é€šè¿‡ä½¿ç”¨è¿œç¨‹æ¡Œé¢æœåŠ¡è¿›è¡Œè¿œç¨‹è¿æ¥â€œ,çœ‹ä¸€ä¸‹ä¹‹å‰æ˜¯å¦æœ‰é…ç½®,å¦‚æœæœ‰çš„è¯æ”¹æˆâ€æœªé…ç½®â€,å¦‚æœä¹‹å‰å°±æ˜¯æœªé…ç½®,é‚£å¯ä»¥æ”¹æˆå·²å¯ç”¨,ç„¶åæ‚¨å†çœ‹ä¸€ä¸‹ç³»ç»Ÿå±æ€§&gt;è¿œç¨‹æ¡Œé¢ä¸­çš„ç›¸å…³è®¾ç½®åŒºåŸŸæ˜¯å¦æ¢å¤æ­£å¸¸. ï¼ˆ2ï¼‰é˜²ç«å¢™ è®¾ç½®äº†é˜²ç«å¢™å…è®¸è¿œç¨‹æ¡Œé¢é€šè¿‡é˜²ç«å¢™é€šä¿¡ ï¼ˆ3ï¼‰ç«¯å£ å¼€å¯äº†ç”¨äºè¿œç¨‹æ¡Œé¢è¿æ¥çš„æœåŠ¡ç«¯å£ï¼š åœ¨cmdä¸­è¾“å…¥netstat -aon|findstr 3389ï¼ŒæŸ¥çœ‹é»˜è®¤ç«¯å£å·3389æ˜¯å¦å¼€å¯ã€‚ è‹¥ç«¯å£å·æœªå¼€å¯ï¼šæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œå¼€å¯ä¸‹é¢ä¸¤é¡¹æœåŠ¡ã€‚ï¼ˆUmRdpServiseå¯æ’­æ”¾å£°éŸ³) è‹¥ä¿®æ”¹è¿‡æˆ–æ— æ³•æŸ¥è¯¢åˆ°3389ç«¯å£ï¼Œ&gt; å‚è€ƒè¿™é‡Œã€‚ ï¼ˆ4ï¼‰æœ¬åœ°ç­–ç•¥ è®¾ç½®æœ¬åœ°ç­–ç•¥éæ¥å®¾ã€‚åœ¨è¿è¡Œä¸­è¾“å…¥ï¼šgpedit.msc ï¼ˆ5ï¼‰å…³é—­ Windows hello ç¡®ä¿å…³é—­äº†è®¾ç½®å†… ä»…å…è®¸ Windows hello ç™»å½• (æœªè®¾ç½®å¯å¿½ç•¥ã€‚) Windows Helloï¼šä½¿æ‚¨å¯ä»¥ä½¿ç”¨è„¸éƒ¨ï¼Œè™¹è†œï¼ŒæŒ‡çº¹æˆ–PINç™»å½•è®¾å¤‡ï¼Œåº”ç”¨ç¨‹åºï¼Œåœ¨çº¿æœåŠ¡å’Œç½‘ç»œã€‚ ï¼ˆ6ï¼‰AAD ç¡®ä¿ä¸æ˜¯é€šè¿‡ Microsoft Authenticator ï¼Œè€Œæ˜¯é€šè¿‡æ‰‹åŠ¨è¾“å…¥å¯†ç è¿›è¡ŒéªŒè¯ç™»å½•çš„ï¼š å› ä¸º Microsoft Authenticator ç™»å½•ä½¿ç”¨çš„è®¤è¯æ–¹å¼ä¸å…¶ä»–åŸŸä¸äº’é€šï¼Œå°±ä¸èƒ½ç›´æ¥å¼€å¯è¿æ¥å•¦ã€‚ 2.2 æ·»åŠ è®¡ç®—æœº é…ç½®Windowså…è®¸è¿œç¨‹æ¡Œé¢è¿æ¥åï¼Œä½¿ç”¨Macå‡†å¤‡å¼€å§‹è¿æ¥ï¼Œåœ¨Microsoft Remote Desktopä¸­æ·»åŠ PCï¼Œè¾“å…¥ä¸»æœºå + ç”¨æˆ·è´¦å·ä¿¡æ¯ã€‚ PC nameï¼šIPåœ°å€ã€‚ æŸ¥çœ‹æ–¹æ³•ï¼šåœ¨ Windows çš„å‘½ä»¤æç¤ºç¬¦(win+R é”®æ‰“å¼€çš„è¿è¡Œçª—å£è¾“å…¥cmd) è¾“å…¥å‘½ä»¤ ipconfigï¼Œå¯æŸ¥çœ‹ipv4åœ°å€ã€‚ User accountï¼šç™»å½•è¯¥PCçš„è´¦å·å¯†ç ã€‚å»ºè®®é€‰æ‹© Ask when requiredï¼Œå…ˆä¸è¾“å…¥è´¦å·å¯†ç ï¼Œåœ¨è¿æ¥æ—¶è¾“å…¥ï¼Œç¡®ä¿èƒ½è¿æ¥æˆåŠŸåå†æ·»åŠ è®°å½•ï¼Œé˜²æ­¢è¿™é‡Œä¿å­˜çš„è´¦å·å¯†ç æœ‰è¯¯ï¼Œåé¢æ€ä¹ˆéƒ½è¿ä¸ä¸Šã€‚ 2.3 å¡«å†™è´¦æˆ·ä¿¡æ¯ï¼ˆ1ï¼‰ æœ¬åœ°ç”¨æˆ· ä½¿ç”¨æœ¬åœ°ç”¨æˆ·åç™»å½•ï¼š æœ¬åœ°ç”¨æˆ·å(cmdè¾“å…¥ whoami æŸ¥çœ‹) + æœ¬åœ°è§£é”å¯†ç ã€‚ ï¼ˆ2ï¼‰ å¾®è½¯è´¦æˆ· ä½¿ç”¨å¾®è½¯è´¦æˆ·ç™»å½•ï¼š æœ¬åœ°åˆ›å»ºçš„è‹±æ–‡è´¦æˆ·è‹¥å…³è”äº†å¾®è½¯è´¦å·ï¼Œå¯ä½¿ç”¨è¯¥å¾®è½¯è´¦å·é‚®ç®±è¿›è¡Œè¿œç¨‹ç™»å½•ï¼Œç”¨æˆ·åä¸ºé‚®ç®±æ ¼å¼çš„å¾®è½¯è´¦å·(username@outlook.com) + å¯¹åº”çš„å¾®è½¯è´¦å·å¯†ç ã€‚ ï¼ˆ3ï¼‰ ç©ºå¯†ç  æˆ–ä½¿ç”¨ç©ºå¯†ç è¿›è¡Œè¿œç¨‹æ¡Œé¢è¿æ¥ï¼šåœ¨ windows ä¸­è®¾ç½® æ‰“å¼€è¿è¡Œï¼Œè¾“å…¥gpedit.mscï¼Œæ‰“å¼€æœ¬åœ°ç»„ç­–ç•¥ç¼–è¾‘å™¨ 2.4 æŠ¥é”™è§£å†³ï¼ˆ1ï¼‰ The User Account Did Not work ğŸ”’ æç¤ºï¼šThe User Account Did Not Work.The user account used to connect to xx.xx.xx.xx (remote PC) did not work. Try again.ï¼ˆâ€“&gt; ä½ è¾“çš„è¿™ä¸ªè´¦æˆ·ä¿¡æ¯è¿ä¸ä¸Šã€‚ï¼‰ ğŸ”‘ è§£å†³æ–¹æ³•ï¼šéœ€è¦è¾“å…¥æ­£ç¡®çš„è´¦å·å¯†ç ã€‚ å¾®è½¯è´¦å·ç™»å½•ï¼šé‚®ç®±æ ¼å¼çš„å¾®è½¯è´¦å·(username@outlook.com) + å¯¹åº”çš„å¾®è½¯è´¦å·å¯†ç  æœ¬åœ°ç”¨æˆ·ç™»å½•ï¼šæœ¬åœ°ä¸»æœºåæˆ–æœ¬åœ°è´¦æˆ·å + æœ¬åœ°è´¦æˆ·è§£é”å¯†ç  ä»¥å‰å¯ä»¥ï¼Œç°åœ¨çªç„¶è¿ä¸ä¸Šäº†ï¼šæ£€æŸ¥ä¸Šé¢ä¸¤ä¸ªå¯†ç æ˜¯ä¸æ˜¯æ”¹è¿‡äº†ï¼Œå¦‚æœæ”¹è¿‡è®°å¾—åŒæ­¥ä¿®æ”¹ã€‚ ï¼ˆ2ï¼‰ 0x204 ğŸ”’ è¿æ¥æ—¶æç¤ºï¼šWe couldnâ€™t connect to the remote PC.Make sure the PC is turned on and connected to the network, and thar remote access is enabled. Error code:0x204ï¼ˆâ€“&gt; æˆ‘ä»¬æ— æ³•è¿æ¥åˆ°è¿œç¨‹ç”µè„‘ï¼Œç¡®ä¿ç”µè„‘å·²æ‰“å¼€å¹¶è¿æ¥åˆ°ç½‘ç»œï¼Œå¹¶ä¸”å·²å¯ç”¨è¿œç¨‹è®¿é—®ã€‚ï¼‰ ğŸ”‘ è§£å†³æ–¹æ³•ï¼š å¼€ç”µè„‘ã€‚æ£€æŸ¥æ˜¯å¦æ‰“å¼€windowsç”µæºï¼Œç¡®ä¿éå…³æœºæˆ–ç¡çœ çŠ¶æ€ï¼Œå¼€å¯ç”µæºè§£é”å±å¹•å°±å¯ä»¥å•¦ã€‚ è¿Wi-Fiã€‚ å¼€æœåŠ¡ã€‚ç¡®ä¿å·²å¼€å¯ Windows çš„è¿œç¨‹æ¡Œé¢è¿æ¥é…ç½®ã€‚ ï¼ˆ3ï¼‰ 0x207 ğŸ”’ æç¤ºï¼š ğŸ”‘ï¼šç¡®ä¿windowsçš„æœ¬åœ°ç»„ç­–ç•¥ä¸æ˜¯ ä»…æ¥å®¾ çŠ¶æ€ã€‚ ä¸‰. Macé…ç½®3.1 åˆ›å»ºç›®å½• åœ¨macç”µè„‘ä¸Šï¼Œæ ¹æ®éœ€è¦åˆ›å»ºç”¨äºæ–‡ä»¶ä¼ è¾“çš„ç›®å½•ã€‚ 3.2 ç¼–è¾‘é…ç½® å¼€å¯Microsoft Remote Desktop è½¯ä»¶ï¼Œç‚¹å‡»ç¼–è¾‘ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œæ·»åŠ é‡å®šå‘åˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹å¯¹åº”çš„è·¯å¾„ 3.3 å®Œæˆ å¯æŸ¥çœ‹windowsä¸Šçš„æ–‡ä»¶å¤¹æ˜ å°„ï¼Œæ²¡å‡ºç°çš„è¯é‡æ–°è¿æ¥è¯•è¯•ã€‚ å››. ç»“å°¾ç¬¬ä¸€æ¬¡å®Œæˆmacå’Œwindowsä¹‹é—´è¿œç¨‹æ¡Œé¢çš„é…ç½®ï¼Œå›å¤´çœ‹æ„Ÿè§‰å†™å¾—æœ‰äº›å¤æ‚ï¼Œå› ä¸ºå¤šè®°å½•äº†ä¸€äº›è‡ªå·±ä¹Ÿæ²¡é‡åˆ°è¿‡çš„é—®é¢˜å’Œæƒ…å†µã€‚å¦‚æœå„ä½è¿˜é‡åˆ°äº†æ–‡ä¸­æ²¡æåˆ°çš„æƒ…å†µï¼Œæ¬¢è¿è¯„è®ºç•™è¨€ï¼Œæˆ‘ä¼šç»§ç»­è¡¥å……ï½","categories":[],"tags":[{"name":"windows","slug":"windows","permalink":"https://equnee.github.io/tags/windows/"},{"name":"Mac","slug":"Mac","permalink":"https://equnee.github.io/tags/Mac/"}]},{"title":"è¶…æ£’çš„æ–‡æ¡£ç¥å™¨æ­æ¡£ï¼Markdown+ Mermaid","slug":"tool/markdown+mermaid","date":"2020-04-01T16:37:51.048Z","updated":"2023-03-08T21:00:28.270Z","comments":true,"path":"tool/markdown+mermaid/","link":"","permalink":"https://equnee.github.io/tool/markdown+mermaid/","excerpt":"","text":"ç”¨äº†å°±ä¼šçˆ±ä¸Š ä¸€. Markdown1. ä¸ºä»€ä¹ˆç”¨ MarkdownTypora 2. Markdown ç”¨æ³• äºŒ. Mermaid åœ¨çº¿ä½“éªŒï¼šhttps://mermaid.live/ 1. ä¸ºä»€ä¹ˆç”¨ Mermaid æˆ‘å–œæ¬¢æŠŠä¸€æ®µè¾ƒå¤æ‚çš„æ–‡å­—åŠ å·¥æˆä¸€å¼ ç›´è§‚çš„å›¾åƒï¼Œæˆ‘è®¤ä¸ºç”»å›¾æ˜¯ä¸€ç§ç†è§£çŸ¥è¯†ã€å¹¶å°†å…¶è½¬åŒ–å’Œå¸æ”¶çš„è¿‡ç¨‹ã€‚è€Œåœ¨é…åˆ Markdown å†™ç¬”è®°æ—¶ï¼Œæœ€è®©æˆ‘è§‰å¾—å¤´ç–¼çš„å°±æ˜¯å¦‚ä½•ä»¥æœ€çœæ—¶çœåŠ›çš„æ–¹å¼é…å›¾ã€‚æˆ‘åšè¿‡å¾ˆå¤šå°è¯•ï¼šå¦‚ï¼Œæ‰‹ç»˜ã€ä½¿ç”¨Xmindå¯¼å›¾è½¯ä»¶ã€ProcessOnä¹‹ç±»çš„åœ¨çº¿ç»˜å›¾å·¥å…·ç­‰ã€‚ä½†å®ƒä»¬éƒ½æœ‰æœ€æ˜¾è‘—çš„ç¼ºç‚¹ï¼šæœ€ç»ˆä»¥å›¾åƒå½¢å¼å¯¼å…¥æ–‡æ¡£ï¼Œå› æ­¤ä¿®æ”¹å’Œå¯¼å‡ºéå¸¸ç¹çã€‚ è€Œ Mermaid å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªè¯´è¿‘ä¹å®Œç¾çš„æ–¹æ¡ˆï¼ é«˜æ•ˆæ˜“ç”¨ å®ƒç›´æ¥åœ¨ Markdown ä¸­ä»¥ä»£ç æ®µçš„å½¢å¼åˆ›å»ºå’Œä¿®æ”¹å›¾è¡¨ï¼Œå¹¶å®æ—¶æ¸²æŸ“ä¸º Svg è§†å›¾ï¼Œå¯ä»¥é«˜æ•ˆåˆ¶ä½œç®€æ˜“çš„æµç¨‹å›¾ã€‚å¹¶ä¸”éšæ—¶ä¿®æ”¹ã€ç«‹å³å¯è§ã€‚ å®ƒå’Œ Markdown ä¸€æ ·éƒ½æ˜¯çº¯æ–‡æœ¬æ ¼å¼å­˜å‚¨çš„è¯­è¨€ï¼Œæ˜“äºä¿å­˜å’Œåˆ†äº«ã€‚ Webå‹å¥½ å®ƒä¸å—åˆ¶äºç‰¹å®šç¼–è¾‘å™¨ï¼Œå¤§éƒ¨åˆ†æ”¯æŒ Markdown çš„ç¼–è¾‘å™¨éƒ½æ”¯æŒ Mermaidã€‚ å®ƒåŸºäº Javascriptï¼Œå¯é›†æˆåµŒå…¥å‰ç«¯æ¡†æ¶ï¼Œå¦‚ Vueã€Hexoç­‰ã€‚ 2. Mermaid ç”¨æ³•Mermaid å¯ç»˜åˆ¶æµç¨‹å›¾ã€æ—¶åºå›¾ã€Gitå›¾ã€ç±»å›¾ã€é¥¼å›¾ã€ç”˜ç‰¹å›¾ç­‰å›¾è¡¨ï¼Œè¯¦ç»†å¯æŸ¥é˜… å®˜æ–¹æ–‡æ¡£ã€‚ä¸‹é¢æ˜¯æˆ‘å¸¸ç”¨çš„ä¸¤ä¸ªæµç¨‹å›¾æ¨¡ç‰ˆï¼ˆé…è‰²ï¼‰ç¤ºä¾‹ï¼š åŸºç¡€ï¼ˆä½¿ç”¨åŸºæœ¬æ ·å¼ï¼‰ graph LR T((\"Title\")):::p T ==> A([\"Pink\"]):::p T --> B([\"Green\"]):::g T --> C([\"Blue\"]):::b A -.-> a(\"light Pink\"):::lp B -.-> b(\"light Green\"):::lg C -.-> c(\"light Blue\"):::lb a -.- info[\"Info\"]:::info classDef p fill:#ddaebd classDef b fill:#aab7d2 classDef g fill:#9ac5bb classDef lp fill:#f4e4e9 classDef lb fill:#d9dfeb classDef lg fill:#ddebe6 classDef info fill:#f6f6f7,color:#737379,stroke-dasharray: 3 3, stroke-width: 2px graph LR T((&quot;Title&quot;)):::p T ==&gt; A([&quot;Pink&quot;]):::p T --&gt; B([&quot;Green&quot;]):::g T --&gt; C([&quot;Blue&quot;]):::b A -.-&gt; a(&quot;light Pink&quot;):::lp B -.-&gt; b(&quot;light Green&quot;):::lg C -.-&gt; c(&quot;light Blue&quot;):::lb a -.- info[&quot;Info&quot;]:::info%% æ ·å¼ï¼š style T color:#fff classDef p fill:#ddaebd classDef b fill:#aab7d2 classDef g fill:#9ac5bb classDef lp fill:#f4e4e9 classDef lb fill:#d9dfeb classDef lg fill:#ddebe6 classDef info fill:#f6f6f7,color:#737379,stroke-dasharray: 3 3, stroke-width: 2px è¿›é˜¶ï¼ˆä½¿ç”¨é¢„åŠ è½½æ ·å¼ï¼‰ %%{ init: { 'themeVariables': { 'fontFamily': 'Noto Serif SC', 'mainBkg': '#f4e4e9', 'edgeLabelBackground': '#ddebe6' } } }%% graph TD T((\"Title\")):::pink T --> A A -.-> |\"text2\"| B subgraph \"subgraph\" A --> |\"text3\"|C:::lb end classDef pink fill:#ddaebd style B fill:#d9dfeb, stroke:#657eae,stroke-width:3px,stroke-dasharray: 5 3 %%&#123; init: &#123; &#x27;themeVariables&#x27;: &#123; &#x27;fontFamily&#x27;: &#x27;Noto Serif SC&#x27;, &#x27;mainBkg&#x27;: &#x27;#f4e4e9&#x27;, &#x27;edgeLabelBackground&#x27;: &#x27;#ddebe6&#x27; &#125; &#125;&#125;%%graph TDT((&quot;Title&quot;)):::pinkT --&gt; AA -.-&gt; |&quot;text2&quot;| Bsubgraph &quot;subgraph&quot;A --&gt; |&quot;text3&quot;|C:::lbendclassDef pink fill:#ddaebdstyle B fill:#d9dfeb, stroke:#657eae,stroke-width:3px,stroke-dasharray: 5 3 3. Hexo + Mermaid æ’ä»¶ ä»£ç ä»“åº“: https://github.com/webappdevelp/hexo-filter-mermaid-diagrams ï¼ˆ1ï¼‰å®‰è£…æ’ä»¶$ yarn add hexo-filter-mermaid-diagrams æˆ– $ npm install hexo-filter-mermaid-diagrams ï¼ˆ2ï¼‰ç¼–è¾‘é…ç½®å®‰è£…å®Œæˆåï¼Œç¼–è¾‘hexoé…ç½®æ–‡ä»¶ï¼šconfig.yml # mermaid chartmermaid: enable: true version: &quot;7.1.2&quot; options: ï¼ˆ3ï¼‰æ·»åŠ è„šæœ¬ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œç¼–è¾‘åšå®¢é¡µé¢ç»„ä»¶çš„footeréƒ¨åˆ†ã€‚è¿™æ˜¯ä¸ºäº†å°† mermaid.js ä»¥ script å½¢å¼æ’å…¥åˆ° html å°¾éƒ¨ï¼Œä½¿å…¶èƒ½æ­£å¸¸æ¸²æŸ“ã€‚ footeræ–‡ä»¶å¦‚ï¼Œfooter.pugï¼Œ after_footer.pug , after-footer.ejs æˆ– swigï¼Œè¯¥æ–‡ä»¶é€šå¸¸å­˜æ”¾åœ¨ä¸»é¢˜ç›®å½•ä¸‹çš„layoutç›®å½•ä¸­ã€‚ è‹¥åšå®¢ä½¿ç”¨pugæ¨¡ç‰ˆå¼•æ“æ¸²æŸ“ï¼Œåœ¨ after_footer.pugæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç : if theme.mermaid.enable == true script(type=&#x27;text/javascript&#x27;, id=&#x27;maid-script&#x27; mermaidoptioins=theme.mermaid.options src=&#x27;https://unpkg.com/mermaid@&#x27;+ theme.mermaid.version + &#x27;/dist/mermaid.min.js&#x27; + &#x27;?v=&#x27; + theme.version) script. if (window.mermaid) &#123; var options = JSON.parse(document.getElementById(&#x27;maid-script&#x27;).getAttribute(&#x27;mermaidoptioins&#x27;)); mermaid.initialize(options); &#125; è‹¥ä½¿ç”¨ejså¼•æ“æ¸²æŸ“ï¼Œåˆ™åœ¨after-footer.ejsæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š &lt;% if (theme.mermaid.enable) &#123; %&gt; &lt;script src=&#x27;https://unpkg.com/mermaid@&lt;%= theme.mermaid.version %&gt;/dist/mermaid.min.js&#x27;&gt;&lt;/script&gt; &lt;script&gt; if (window.mermaid) &#123; mermaid.initialize(&#123;theme: &#x27;neutral&#x27;&#125;); &#125; &lt;/script&gt;&lt;% &#125; %&gt; swigæ¨¡ç‰ˆå¼•æ“ï¼š &#123;% if theme.mermaid.enable %&#125; &lt;script src=&#x27;https://unpkg.com/mermaid@&#123;&#123; theme.mermaid.version &#125;&#125;/dist/mermaid.min.js&#x27;&gt;&lt;/script&gt; &lt;script&gt; if (window.mermaid) &#123; mermaid.initialize(&#123;&#123; JSON.stringify(theme.mermaid.options) &#125;&#125;); &#125; &lt;/script&gt;&#123;% endif %&#125; ï¼ˆ4ï¼‰è¸©å‘ä»¥ä¸Šä¸ºå®˜æ–¹æ–‡æ¡£ä¸­çš„é…ç½®æ–¹æ³•ï¼Œè€Œæˆ‘åœ¨åˆæ¬¡é…ç½®çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜é‡åˆ°ä»¥ä¸‹é—®é¢˜å¯ä¾›å‚è€ƒï¼š htmlé¡µé¢ä¸­ï¼Œmermaidæ®µè½ä»…æ˜¾ç¤ºä¸ºä»£ç å—ï¼Œå¼€å‘è€…å·¥å…·ä¸­è¯¥æ®µè½ä¸ºæ™®é€šæºä»£ç ã€‚ è¿™æ˜¯å› ä¸ºæ’ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œåº”ç¡®ä¿æ­£ç¡®å®Œæˆä¸Šé¢ä¸¤ä¸ªæ­¥éª¤ï¼ˆå®‰è£…æ’ä»¶ã€æ‰“å¼€é…ç½®ï¼‰ã€‚ htmlé¡µé¢ä¸­ï¼Œmermaidæ®µè½æ˜¾ç¤ºä¸ºç©ºç™½å›¾ç‰‡ï¼Œå¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹è¯¥æ®µè½ä¸ºsvgæ–‡ä»¶ï¼Œæ§åˆ¶å°æŠ¥é”™ï¼š Uncaught TypeError: Cannot read properties of null (readingâ€™mermaidâ€™)ã€‚ æ­¤æ—¶æ’ä»¶å·²ç»ç”Ÿæ•ˆï¼Œè€Œjsä»£ç æ–‡ä»¶å¼•å…¥æœ‰è¯¯ï¼Œæ— æ³•æˆåŠŸæ¸²æŸ“ã€‚ ç»§ç»­æŸ¥çœ‹htmlä»£ç å‘ç°ï¼Œæ–‡ä»¶åº•éƒ¨çš„&lt;sctipt&gt;æ ‡ç­¾ä¸­ï¼Œæ˜¾ç¤ºæˆ‘å¼•å…¥mermaidçš„urlä¸ºï¼š &lt;script type=&quot;text/javascript&quot; id=&quot;maid-script&quot; src=&quot;https://unpkg.com/mermaid@10.0.2/dist/mermaid.min.js?v=undefined&quot;&gt;&lt;/script&gt; è¿™æ®µä»£ç æ˜¯ç”±å®˜æ–¹æä¾›çš„è„šæœ¬ã€åœ¨footeræ–‡ä»¶ä¸­æ ¹æ®ç”¨æˆ·çš„é…ç½®ç»„åˆæˆçš„ï¼š script(type=&#x27;text/javascript&#x27;, id=&#x27;maid-script&#x27; mermaidoptioins=theme.mermaid.options src=&#x27;https://unpkg.com/mermaid@&#x27;+ theme.mermaid.version + &#x27;/dist/mermaid.min.js&#x27; + &#x27;?v=&#x27; + theme.version) å¦‚æœé…ç½®æœ‰è¯¯åˆ™ä¼šç”Ÿæˆé”™è¯¯çš„urlï¼Œçœ‹èµ·æ¥æ˜¯versionçš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘å°†urlæ”¹ä¸ºç›´æ¥å¼•å…¥jsdelivrä¸Šçš„èµ„æºï¼Œé‚èƒ½æ­£å¸¸æ¸²æŸ“ï¼š src=&#x27;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js&#x27;)","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://equnee.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Mermaid","slug":"Mermaid","permalink":"https://equnee.github.io/tags/Mermaid/"},{"name":"Markdown","slug":"Markdown","permalink":"https://equnee.github.io/tags/Markdown/"}]}],"categories":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://equnee.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://equnee.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://equnee.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://equnee.github.io/tags/Java/"},{"name":"HashMap","slug":"HashMap","permalink":"https://equnee.github.io/tags/HashMap/"},{"name":"TreeNode","slug":"TreeNode","permalink":"https://equnee.github.io/tags/TreeNode/"},{"name":"Chain","slug":"Chain","permalink":"https://equnee.github.io/tags/Chain/"},{"name":"singleton","slug":"singleton","permalink":"https://equnee.github.io/tags/singleton/"},{"name":"windows","slug":"windows","permalink":"https://equnee.github.io/tags/windows/"},{"name":"Mac","slug":"Mac","permalink":"https://equnee.github.io/tags/Mac/"},{"name":"Mermaid","slug":"Mermaid","permalink":"https://equnee.github.io/tags/Mermaid/"},{"name":"Markdown","slug":"Markdown","permalink":"https://equnee.github.io/tags/Markdown/"}]}